var O=Object.defineProperty,_=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var w=(a,t,e)=>t in a?O(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,L=(a,t)=>{for(var e in t||(t={}))x.call(t,e)&&w(a,e,t[e]);if(y)for(var e of y(t))h.call(t,e)&&w(a,e,t[e]);return a},T=(a,t)=>_(a,C(t));var v=(a,t,e)=>new Promise((d,l)=>{var g=s=>{try{p(e.next(s))}catch(u){l(u)}},f=s=>{try{p(e.throw(s))}catch(u){l(u)}},p=s=>s.done?d(s.value):Promise.resolve(s.value).then(g,f);p((e=e.apply(a,t)).next())});import{y as b,u as R,r as c,l as m}from"./index-D09qPjuF.js";import{g as F,a as H,r as S,b as P}from"./removeGeForceRTX-BIdkcrrK.js";const N=b("cloud-cafe",()=>{const{t:a}=R(),t=c(!1),e=c(500),d=c(0),l=c(0),g=c([{title:()=>m("div",{class:"dark:text-white font-bold"},"暂无数据"),num:0,canRentTrue:0,maxCalcPoint:0}]),f=()=>v(void 0,null,function*(){return yield F()}),p=()=>v(void 0,null,function*(){var r;t.value=!0;const{data:o}=yield f();if(console.log(o,"OOOOOOOOO"),o.success){d.value=o.content.geo.ll[1],l.value=o.content.geo.ll[0];const{data:i}=yield H({distance:e.value,longitude:d.value,latitude:l.value,type:"gpu"});console.log(i,"MMMMMMMMM"),t.value=!1,i.success&&(g.value=i.content.map(n=>({title:()=>m("div",{class:"dark:text-white font-bold"},S(n._id)),num:n.total,canRentTrue:n.canRentTrue,maxCalcPoint:n.maxCalcPoint,type:n._id})))}else(r=window.$message)==null||r.error(a("app.fetchCurrentLocationFailed"))}),s=c([]),u=c(!0);return{getGpsH:f,getGpuTypeH:p,gpuTypeList:g,gpuTypeListLoading:t,getGpuListH:o=>v(void 0,null,function*(){var i;u.value=!0;const{data:r}=yield P({distance:o.distance==="all"?"all":Number(e.value),longitude:o.longitude,latitude:o.latitude,gputype:o.type,pageSize:99999,page:1});u.value=!1,r.success?(console.log(r,"根据gpu类型获取gpu列表"),s.value=r.content.map(n=>{const G=`${((n.current_time+n.can_use_time*60*60*1e3-+new Date)/(1e3*60*60)).toFixed(2)} h`,M=()=>n.can_rent&&!n.is_rented?"vacant":!n.can_rent&&!n.is_rented?"notRentable":"rented";return T(L({},n),{canUseTime:G,rsStatus:M})})):(i=window.$message)==null||i.error(a("app.fetchGpuListFailed"))}),gpuList:s,gpuListLoading:u,distance:e,longitude:d,latitude:l}});export{N as u};
