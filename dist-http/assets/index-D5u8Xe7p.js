var T=(d,S,p)=>new Promise((u,w)=>{var t=s=>{try{h(p.next(s))}catch(v){w(v)}},k=s=>{try{h(p.throw(s))}catch(v){w(v)}},h=s=>s.done?u(s.value):Promise.resolve(s.value).then(t,k);h((p=p.apply(d,S)).next())});import{u as H,_ as J}from"./index-CxsQAZSH.js";import{_ as Q}from"./btnnfts-CT0UzQpt.js";import{d as R,u as A,p as U,k as E,r as z,a as K,c as y,e,t as o,s as B,f as i,S as W,al as X,b as x,w as L,as as Y,o as _,B as O,i as Z,j as ee,h as te,l as F,F as D,q as P,D as se,aP as oe,aJ as ae,E as ne,aQ as re,aR as ce,_ as le}from"./index-D09qPjuF.js";import{u as G}from"./useGetDlcPrice-DJQJU68y.js";import{u as V}from"./useGetDbcAndDlcNumber-CZsJ8j1k.js";import{f as ie}from"./formatNumber-Cjl9iEiW.js";import{u as de}from"./useExternalLinkOptions-C6_daVTn.js";import{c as pe}from"./transferToUsd-CHpIPDKe.js";import{u as ue}from"./index-CX6PlS-G.js";import{N as me}from"./GradientText-C-JYbI03.js";import{_ as fe}from"./Skeleton-Byb0olwy.js";import"./decryptKeystore-vcF9PyHc.js";import"./units-C_OuvvnV.js";import"./maths-Byej6qXm.js";import"./wallet-DM2W-3OY.js";import"./contracts-C6BXjFxA.js";import"./Grid-D8jJ9AZ-.js";import"./use-locale-Clgi8CGA.js";import"./get-D38_uRRN.js";import"./Suffix-CD_PMG80.js";import"./use-houdini-BufkfByg.js";const _e={class:"flex flex-col"},xe={class:"flex flex-col gap-2 justify-between mb-2"},he={class:"text-primary-500"},ve={class:"flex flex-col gap-2 items-center"},ge={class:"font-bold text-[20px]"},ye={class:"text-xs flex items-center flex-wrap"},be={class:"text-primary-300"},we={class:"-mt-5 text-xs text-gray-400 leading-5"},ke=R({__name:"nftsDialog",props:{data:{type:Object,default:null}},setup(d,{expose:S}){const{dbcNumber:p,dlcNumber:u,homeCardLoading:w}=V(),{t}=A(),k=U(),{dlc_price:h}=G(),s=d,v={0:t("Store.proCrown1M"),1:t("Store.proCrown3M"),2:t("Store.proCrown6M"),3:t("Store.proCrown12M")},m={0:t("Store.duration1M"),1:t("Store.duration3M"),2:t("Store.duration6M"),3:t("Store.duration12M")},r={0:"66666.67",1:"175000",2:"300000",3:"500000"},g={0:0,1:1,2:2,3:3},N=E(()=>{if(u.value)return console.log(u.value,r[s.data.type],u.value<r[s.data.type],"????????"),!!+(u.value<r[s.data.type])}),$=z(null),c=K({password:""});return S({model:c,formRef:$,number:r[s.data.type],endTime:g[s.data.type],showBalanceIsOk:N}),(n,f)=>{const b=O,a=Y;return _(),y("div",_e,[e("h1",xe,[e("span",null,o(n.$t("Store.selectedNft"))+":",1),e("span",he,[B(o(n.$t("Store.walletBalance"))+"： "+o(i(ie)(i(u)))+" ",1),W(e("span",{class:"text-error-500"},"（"+o(n.$t("Store.insufficientBalance"))+"）",513),[[X,i(N)]])])]),x(a,{class:"rounded-lg mb-8 transition-colors duration-300"},{default:L(()=>[e("div",ve,[x(b,{type:"primary",class:"w-[70%] h-[50px] rounded-[12px] text-[20px] text-white border-none *:",style:{background:"linear-gradient(to right, #8000ff, #00ffd1)"}},{default:L(()=>[B(o(s.data.v)+" / "+o(m[s.data.type]),1)]),_:1}),e("span",ge,o(v[s.data.type]),1),e("span",ye,[e("span",null,o(n.$t("Store.equivalent"))+" "+o(r[s.data.type])+" DLC ("+o(n.$t("Store.currentDlcPrice"))+"：",1),e("span",be,o(i(k).useLocalizedCurrency(i(h))||"0.00"),1),B(" )")])])]),_:1}),e("h5",we,o(n.$t("Store.nftDelayTip"))+"：service@deeplink.cloud",1)])}}}),q=d=>(re("data-v-12b0f9ef"),d=d(),ce(),d),Se={key:0,class:"my-6 grid grid-cols-2 gap-5"},Ne=["onClick"],$e=q(()=>e("img",{class:"w-[80px] h-[80px] object-cover mb-2 rounded-md",src:J,alt:""},null,-1)),Ce={class:"flex flex-col items-center text-center"},Le={class:"font-bold text-[14px] text-black"},Te={class:"text-[12px] text-gray-600"},Be={class:"flex items-center justify-between w-full gap-2"},De=q(()=>e("img",{src:Q,class:"w-[28px] h-[28px] object-cover rounded",alt:""},null,-1)),Ee={class:"flex flex-col items-end gap-1"},ze={class:"text-[#005F35] text-xs flex items-center gap-1"},Ie={class:"font-bold text-[14px] text-black"},je={key:1,class:"my-6 grid grid-cols-2 gap-5"},Me={class:"mt-[60px] flex items-center gap-6 flex-wrap"},Fe={class:"flex items-center gap-2 w-full justify-center"},Pe=R({__name:"index",setup(d){const{dbcNumber:S,dlcNumber:p,homeCardLoading:u}=V(),{openExternalLink:w}=de(),t=H(),{dlc_price:k}=G(),h=Z();ee();const s=ue(),v=te();t.getNftListH();const{t:m,locale:r}=A();let g=z(0);const N=E(()=>[{label:m("Store.nextpage"),icon:"mdi:arrow-right",action:"next",secondary:!0,h:()=>{w("https://www.deeplink.cloud/nft")}},{label:m("Store.buy"),icon:"mdi:cart",action:"buy",secondary:!1,h:$=>T(this,null,function*(){var f,b;const c=z(),n=(b=window.$dialog)==null?void 0:b.info({title:()=>F(me,{size:24,type:"success",class:"font-bold"},{default:()=>m("Store.buyNft")}),content:()=>F(ke,{ref:c,data:t.nftList[g.value]}),class:"rounded-2xl dark:bg-[#1a1a1a] dark:text-white",showIcon:!1,negativeButtonProps:{color:"#3CD8A6",size:"medium"},positiveButtonProps:{color:"#03C188",size:"medium",disabled:(f=c.value)==null?void 0:f.showBalanceIsOk},positiveText:m("app.confirm"),negativeText:m("app.cancel"),onPositiveClick:()=>T(this,null,function*(){var a,l,C,I,j,M;n&&(console.log("888888888888888",(a=c.value)==null?void 0:a.number,p.value),Number((l=c.value)==null?void 0:l.number)<=Number(p.value)?(yield t.purchaseNFTFlow({dlcAmount:(C=c.value)==null?void 0:C.number,saveData:{price:pe(Number((I=c.value)==null?void 0:I.number),k.value),purchaser:v.address,version_type:0,expire_type:(j=c.value)==null?void 0:j.endTime,collection:0,purchase_path:"Android",mintNFT:!1}}))&&(h.push({name:"home"}),s.activeTab="NFTs"):(M=window.$message)==null||M.warning(m("remote.dlcBalanceNotEnough")))})})})}]);return E(()=>{if(t.nftListEndTime)return r.value==="zh"?t.nftListEndTime.end_time_zh:r.value==="ja"?t.nftListEndTime.end_time_ja:r.value==="ko"?t.nftListEndTime.end_time_ko:r.value==="vn"?t.nftListEndTime.end_time_vn:t.nftListEndTime.end_time_en}),($,c)=>{const n=O,f=fe,b=se("Icon");return _(),y(D,null,[i(t).nftListLoading?(_(),y("div",je,[x(f,{class:"rounded-lg !h-[180px]",size:"large"}),x(f,{class:"rounded-lg !h-[180px]",size:"large"}),x(f,{class:"rounded-lg !h-[180px]",size:"large"}),x(f,{class:"rounded-lg !h-[180px]",size:"large"})])):(_(),y("div",Se,[(_(!0),y(D,null,P(i(t).nftList,(a,l)=>(_(),y("div",{onClick:C=>oe(g)?g.value=l:g=l,style:ae(i(g)===l?"background: #3CD8A6;":"background: #E1EBE7;"),class:"rounded-[16px] p-3 transition flex flex-col items-center",key:l},[$e,e("div",Ce,[e("span",Le,o(a.price),1),e("span",Te,o(a.vertion),1)]),x(n,{class:"w-full mt-3 h-[41px] px-2 rounded-[8px]",size:"small",type:"primary"},{default:L(()=>[e("div",Be,[De,e("div",Ee,[e("span",ze,[e("span",null,o(a.percent),1),e("span",null,o($.$t("Store.discount")),1)]),e("span",Ie,o(a.v),1)])])]),_:2},1024)],12,Ne))),128))])),e("div",Me,[(_(!0),y(D,null,P(i(N),(a,l)=>(_(),ne(n,{key:l,type:"primary",onClick:C=>a.h(a),secondary:a.secondary,class:"flex-1 h-[52px] rounded-[12px] text-[20px]"},{default:L(()=>[e("div",Fe,[e("span",null,o(a.label),1),x(b,{class:"text-[25px]",icon:a.icon},null,8,["icon"])])]),_:2},1032,["onClick","secondary"]))),128))])],64)}}}),lt=le(Pe,[["__scopeId","data-v-12b0f9ef"]]);export{lt as default};
