var _=(e,o,s)=>new Promise((a,n)=>{var l=t=>{try{u(s.next(t))}catch(m){n(m)}},p=t=>{try{u(s.throw(t))}catch(m){n(m)}},u=t=>t.done?a(t.value):Promise.resolve(t.value).then(l,p);u((s=s.apply(e,o)).next())});import{d as S,r as y,u as R,a as ie,o as c,c as r,b as h,w as k,e as b,t as g,f as i,g as O,h as A,p as V,i as J,j as X,k as Q,l as P,m as re,n as le,F as I,q as U,s as G,v as pe,x as ue,B as Y,y as de,z as me,A as fe,C as xe,D as _e,E as N,G as q}from"./index-ChhltHVQ.js";import{u as Z}from"./useGetDbcAndDlcNumber-JPe6fMnm.js";import{c as ee,a as te}from"./transferToUsd-CHpIPDKe.js";import{u as oe,_ as ge}from"./BuyDlc.vue_vue_type_script_setup_true_lang-B9obUGTl.js";import{u as se}from"./useGetDlcPrice-Cj32P7WO.js";import{d as he,J as we,C as ve}from"./decryptKeystore-vcF9PyHc.js";import{_ as ye}from"./Alert-DxTzPwOq.js";import{_ as be,a as ke,b as Ce,c as $e}from"./Grid-2xvDnFFT.js";import{D as Pe,a as De}from"./dlc-Doa3S9C-.js";import{f as F}from"./formatNumber-Cjl9iEiW.js";import{N as T}from"./GradientText-CLZFWYbX.js";import{_ as Be}from"./Skeleton-dZHpmH9y.js";import{f as Ae}from"./units-C_OuvvnV.js";import"./maths-Byej6qXm.js";import"./wallet-DM2W-3OY.js";import"./use-locale-Dbc-qWHc.js";import"./get-HvKeKp0F.js";import"./Suffix-CiGOD4QE.js";import"./use-houdini-Bm8e05Yt.js";function ne(){return{maskAddress:(o,s=6,a=4)=>{if(!o||o.length<s+a+2)return o;const n=o.slice(0,s),l=o.slice(-a);return`${n}...${l}`}}}const Te={class:"flex flex-col gap-6"},Re={class:"text-[12.5px] leading-6 dark:text-[#92400E]"},ze=S({__name:"exportWallet",setup(e,{expose:o}){const s=y(null),{t:a}=R(),n=ie({password:""}),l={password:[{validator:(p,u)=>u?!0:new Error(a("home.passwordRequired")),trigger:["blur","input"]}]};return o({formRef:s,model:n}),(p,u)=>{const t=ye,m=be,w=ke,B=Ce,C=$e;return c(),r("div",Te,[h(t,{"show-icon":!1,type:"warning"},{default:k(()=>[b("div",Re,g(p.$t("home.exportWarning")),1)]),_:1}),h(C,{ref_key:"formRef",ref:s,model:i(n),rules:l,"label-placement":"top"},{default:k(()=>[h(B,{cols:24},{default:k(()=>[h(w,{span:24,label:p.$t("home.walletPassword"),path:"password"},{default:k(()=>[h(m,{type:"password","show-password-on":"click",class:"min-h-[44px] rounded-lg",value:i(n).password,"onUpdate:value":u[0]||(u[0]=z=>i(n).password=z),placeholder:p.$t("home.enterWalletPassword")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])])}}}),Le=()=>{const{t:e,locale:o}=R(),{copy:s}=O(),a=A(),{dbcNumber:n,dlcNumber:l}=Z(),p=V(),{dlc_price:u}=se(),{dbc_price:t}=oe(),m=J();X();const w=y(!1),B=()=>{w.value=!w.value},C=()=>{var d;s(a.address),(d=window.$message)==null||d.success(e("home.copySuccess"))},z=Q(()=>[{coin:"DLC",icon:Pe,number:F(l.value),price:p.useLocalizedCurrency(ee(Number(l.value),u.value))},{coin:"DBC",icon:De,number:F(n.value),price:p.useLocalizedCurrency(te(Number(n.value),t.value))}]),M=()=>{var d;(d=window.$dialog)==null||d.info({title:()=>P(T,{size:24,type:"success",class:"font-bold"},{default:()=>"Buy DLC"}),content:()=>P(ge),class:"rounded-2xl dark:bg-[#1a1a1a] dark:text-white",showIcon:!1,negativeButtonProps:{color:"#3CD8A6",size:"medium"},positiveButtonProps:{color:"#03C188",size:"medium"},onPositiveClick:()=>{console.log("Confirm")}})},E=y([{t:"home.exportWallet",icon:null,h:()=>{var $;let d=y();const x=($=window.$dialog)==null?void 0:$.warning({title:()=>P(T,{size:24,type:"success",class:"font-bold"},{default:()=>e("home.title")}),content:()=>P(ze,{ref:d}),positiveText:e("home.export"),negativeText:e("app.cancel"),negativeButtonProps:{color:"#3CD8A6",size:"medium"},positiveButtonProps:{color:"#03C188",size:"medium"},class:"rounded-2xl dark:bg-[#1a1a1a] dark:text-white",showIcon:!1,onPositiveClick:()=>_(void 0,null,function*(){var L,v;if(console.log(d.value),x)if(console.log((L=d.value)==null?void 0:L.formRef),yield new Promise((f,D)=>_(void 0,null,function*(){var j,H;(H=(j=d.value)==null?void 0:j.formRef)==null||H.validate(ce=>_(void 0,null,function*(){var K;ce?((K=window.$message)==null||K.error(e("home.checkPassword")),f(!1)):f(!0)}))}))){x.loading=!0,x.positiveText=e("home.exporting");const{address:f,privateKey:D,mnemonic:j}=yield he(a.keystore,d.value.model.password,e);if(D!=="")console.log(e("home.success")),s(D),(v=window.$message)==null||v.success(e("home.privateKeyCopied")),x.loading=!1,x.positiveText=e("app.export");else return x.loading=!1,x.positiveText=e("app.export"),!1}else return!1})})}},{t:"home.disconnect",icon:null,h:()=>{var x;const d=(x=window.$dialog)==null?void 0:x.warning({title:()=>P(T,{size:24,type:"success",class:"font-bold"},{default:()=>e("home.disconnectWallet")}),content:()=>e("home.disconnectConfirm"),class:"rounded-2xl dark:bg-[#1a1a1a] dark:text-white",showIcon:!1,negativeButtonProps:{color:"#3CD8A6",size:"medium"},positiveButtonProps:{color:"#03C188",size:"medium"},positiveText:e("app.confirm"),negativeText:e("app.cancel"),onPositiveClick:()=>_(void 0,null,function*(){d&&(d.loading=!0,d.positiveText="loading...",yield new Promise(($,L)=>{setTimeout(()=>{var v;d.loading=!1,d.positiveText=e("app.confirm"),a.$reset(),m.push({name:"IsWallet"}),(v=window.$message)==null||v.success(e("home.disconnectSuccess")),$(!0)},1e3)}))})})}}]);return{showBalance:w,toggleBalance:B,copyH:C,cryptoData:z,buyDlc:M,cardAction:E}};function Ne(e,o=600){return _(this,null,function*(){const[s]=yield Promise.all([e(),re(o)]);return s})}const Ie=""+new URL("point0-Gg9x-RhE.png",import.meta.url).href,Ue=""+new URL("point1-Bqk10qxX.png",import.meta.url).href,Se=""+new URL("point2-Bp3k_bUl.png",import.meta.url).href,Ee=""+new URL("point3-DsQf8X56.png",import.meta.url).href,We=""+new URL("point4-0qSyr4SP.png",import.meta.url).href,je=""+new URL("point5-BzTDK2MK.png",import.meta.url).href,Ge=""+new URL("point6-B3nmlyui.png",import.meta.url).href,Me=""+new URL("point7-CCMHdCoK.png",import.meta.url).href,He={class:"space-y-4 xl:min-w-[700px]"},Ke={class:"text-[13px] md:text-[15px] text-warning-light dark:text-warning-dark"},qe={key:0,class:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4"},Fe={key:1,class:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-4 md:gap-y-8"},Oe={class:"font-bold text-[17px] md:text-xl"},Ve=["src"],Je=["src"],Xe={class:"text-sm my-1"},Qe=S({__name:"buy-point",setup(e){A();const o=y(!0),s=y([{number:"$5",text:"5000 points",value:5e3,img:Ie},{number:"$10",text:"10000 points",value:1e4,img:Ue},{number:"$15",text:"15000 points",value:15e3,img:Se},{number:"$20",text:"20000 points",value:2e4,img:Ee},{number:"$25",text:"25000 points",value:25e3,img:We},{number:"$30",text:"30000 points",value:3e4,img:je},{number:"$35",text:"35000 points",value:35e3,img:Ge},{number:"$40",text:"40000 points",value:4e4,img:Me}]);le(()=>_(this,null,function*(){yield Ne(()=>_(this,null,function*(){const n=s.value.map(l=>{const{isLoading:p}=pe({src:l.img});return new Promise(u=>{const t=ue(p,m=>{m||(t(),u(!0))})})});yield Promise.all(n)}),800),o.value=!1}));const a=n=>{console.log(n)};return(n,l)=>{const p=Be,u=Y;return c(),r("div",He,[b("div",Ke,g(n.$t("p.home.withPoints")),1),o.value?(c(),r("div",qe,[(c(!0),r(I,null,U(s.value.length,t=>(c(),r("div",{key:t,class:"flex flex-col gap-1 items-center justify-center"},[h(p,{circle:"",height:"50px"}),h(p,{style:{width:"96px",height:"27px","border-radius":"12px"}})]))),128))])):(c(),r("div",Fe,[(c(!0),r(I,null,U(s.value,(t,m)=>(c(),r("div",{key:m,class:"flex flex-col items-center justify-center"},[b("h1",Oe,g(t.number),1),m===0?(c(),r("img",{key:0,class:"w-[42px] h-[30px] md:h-[36px] object-fill",src:t.img,alt:""},null,8,Ve)):(c(),r("img",{key:1,class:"w-[70px] h-[30px] md:w-[90px] md:h-[36px] object-fill",src:t.img,alt:""},null,8,Je)),b("h3",Xe,g(n.$t(t.text)),1),h(u,{onClick:w=>a(t),class:"rounded-xl px-2 md:px-3 !py-0 !h-[27px] text-sm md:text-base",type:"primary"},{default:k(()=>[G(g(n.$t("p.home.buyNow")),1)]),_:2},1032,["onClick"])]))),128))]))])}}}),ae=de("login",()=>{const e=A(),{maskAddress:o}=ne(),s=y(""),a=()=>_(void 0,null,function*(){const{data:l}=yield fe({wallet:e.address});l.success&&(s.value=l.data)});me(()=>{e.address&&(console.log("自动监听钱包重新请求"),a())});const n=Q(()=>{if(e.address)return e.mode?s.value:o(e.address)});return{getWalletIdH:a,walletId:s,walletAddress:n}}),Ye=()=>{const e=A(),{t:o,locale:s}=R(),a=J();X();const{copy:n}=O(),l=ae(),p=()=>{var t;n(l.walletAddress),(t=window.$message)==null||t.success(o("home.copySuccess"))};return{PointcardAction:y([{icon:"mdi:medal-outline",t:"p.home.purchase",h:()=>{var t;(t=window.$dialog)==null||t.info({title:()=>P(T,{size:24,type:"success",class:"font-bold"},{default:()=>o("p.home.buyPoints")}),content:()=>P(Qe),class:"rounded-2xl dark:bg-[#1a1a1a] dark:text-white",negativeButtonProps:{color:"#3CD8A6",size:"medium"},positiveButtonProps:{color:"#03C188",size:"medium"},showIcon:!1})}},{icon:null,t:"p.home.closeaccount",h:()=>{var m;const t=(m=window.$dialog)==null?void 0:m.warning({title:()=>P(T,{size:24,type:"success",class:"font-bold"},{default:()=>o("p.home.close")}),content:()=>o("p.home.closeConfirm"),class:"rounded-2xl dark:bg-[#1a1a1a] dark:text-white",showIcon:!1,negativeButtonProps:{color:"#3CD8A6",size:"medium"},positiveButtonProps:{color:"#03C188",size:"medium"},positiveText:o("app.confirm"),negativeText:o("app.cancel"),onPositiveClick:()=>_(void 0,null,function*(){t&&(t.loading=!0,t.positiveText="loading...",yield new Promise((w,B)=>{setTimeout(()=>{var C;t.loading=!1,t.positiveText=o("app.confirm"),e.$reset(),a.push({name:"IsWallet"}),(C=window.$message)==null||C.success(o("p.home.closedSuccess")),w(!0)},1e3)}))})})}}]),copyHPoint:p}},Ze="https://rpc1.dbcwallet.io",et="0x9b09b4B7a748079DAd5c280dCf66428e48E38Cd6";function tt(){return new we(Ze)}const ot=(e,o)=>{const s=["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)","function transfer(address,uint256) returns (bool)",{inputs:[{internalType:"address",name:"caller",type:"address"}],name:"getAvailableAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];return new ve(e,s,o)};function st(e){return _(this,null,function*(){const o=tt(),a=yield ot(et,o).balanceOf(e);return Ae(a).toString()})}function nt(e,o=3){const[s,a=""]=e.split(".");return o<=0?s:`${s}.${a.slice(0,o).padEnd(o,"0")}`}const at=(e=6e4)=>{const o=A(),s=y(!1),a=y("0.000"),n=()=>_(void 0,null,function*(){if(o.address){s.value=!0;try{const t=yield st(o.address);a.value=nt(t,3)}catch(t){console.error("[useGetUserPoints] 获取积分失败:",t),a.value="0.000"}finally{s.value=!1}}}),{pause:l,resume:p,isActive:u}=xe(()=>{o.address&&n()},e,{immediateCallback:!0});return{points:a,loading:s,refresh:n,pause:l,resume:p,isActive:u}},ct={class:"flex flex-col gap-5 w-full rounded-lg text-white px-[17px] py-[27px] relative",style:{background:"linear-gradient(to right, #017543 0%, #017543 26%, #03ff91 100%)"}},it={class:"flex gap-6 items-start flex-wrap gap-y-2 text-white"},rt={key:0,class:"flex flex-wrap items-start gap-x-2 text-base font-bold tabular-nums"},lt={key:0,class:"text-[17.5px] text-base font-bold tabular-nums"},pt={key:1,class:"text-base font-bold tabular-nums"},ut={key:1,class:"flex flex-wrap items-start gap-x-2 text-base font-bold tabular-nums"},dt={class:"text-[17.5px] text-base font-bold tabular-nums"},mt={class:"text-base font-bold tabular-nums"},ft={key:0,class:"flex items-center gap-3"},xt={class:"text-[12px]"},_t={key:1,class:"flex items-center gap-3"},gt={class:"text-[12px]"},ht={key:2,class:"flex items-center gap-2 flex-wrap"},wt={key:3,class:"flex items-center gap-2 flex-wrap"},vt=S({__name:"MyCard",setup(e){const{points:o}=at(),s=ae();R();const{dbc_price:a}=oe(),{dlc_price:n}=se(),l=V(),{dbcNumber:p,dlcNumber:u}=Z(),t=A(),{maskAddress:m}=ne(),{showBalance:w,toggleBalance:B,copyH:C,cryptoData:z,buyDlc:M,cardAction:E}=Le(),{PointcardAction:d,copyHPoint:x}=Ye();return($,L)=>{const v=_e("Icon"),W=Y;return c(),r("div",ct,[b("div",it,[i(t).mode?(c(),r("div",ut,[b("div",dt,g(i(o)),1),b("span",mt,g($.$t("p.home.points")),1)])):(c(),r("div",rt,[i(w)?(c(),r("div",lt,g(i(l).useLocalizedCurrency(i(te)(Number(i(p)),i(a))+i(ee)(Number(i(u)),i(n)))),1)):(c(),r("span",pt,"*********")),h(v,{icon:i(w)?"mdi:eye":"mdi:eye-off",class:"cursor-pointer text-[20px] flex-shrink-0",onClick:i(B)},null,8,["icon","onClick"])]))]),i(t).mode?(c(),r("h1",_t,[b("span",gt,g(i(s).walletAddress),1),h(v,{onClick:i(x),icon:"mdi:content-copy",class:"cursor-pointer text-[16px]"},null,8,["onClick"])])):(c(),r("h1",ft,[b("span",xt,g(i(m)(i(t).address)),1),h(v,{onClick:i(C),icon:"mdi:content-copy",class:"cursor-pointer text-[18px]"},null,8,["onClick"])])),i(t).mode?(c(),r("h1",wt,[(c(!0),r(I,null,U(i(d),(f,D)=>(c(),N(W,{key:D,onClick:f.h,secondary:"",class:"text-white text-[12px] md:text-[13px] dark:text-white rounded-lg"},{icon:k(()=>[f.icon?(c(),N(v,{key:0,icon:f.icon,class:"text-[18px]"},null,8,["icon"])):q("",!0)]),default:k(()=>[G(" "+g($.$t(f.t)),1)]),_:2},1032,["onClick"]))),128))])):(c(),r("h1",ht,[(c(!0),r(I,null,U(i(E),(f,D)=>(c(),N(W,{key:D,onClick:f.h,secondary:"",class:"text-white text-[12px] md:text-[13px] dark:text-white rounded-lg"},{icon:k(()=>[f.icon?(c(),N(v,{key:0,icon:f.icon,class:"text-[18px]"},null,8,["icon"])):q("",!0)]),default:k(()=>[G(" "+g($.$t(f.t)),1)]),_:2},1032,["onClick"]))),128))]))])}}}),yt={class:"px-[16px] w-full"},Mt=S({__name:"index",setup(e){return R(),(o,s)=>(c(),r("div",yt,[h(vt)]))}});export{Mt as default};
